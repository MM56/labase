function pathToRegexp(e,r,n){r=r||[],n=n||{};var t=n.strict,i=n.end!==!1,a=n.sensitive?"":"i",p=0;if(e instanceof RegExp){var u=e.source.match(/\((?!\?)/g)||[];return r.push.apply(r,u.map(function(e,r){return{name:r,delimiter:null,optional:!1,repeat:!1}})),e}if(Array.isArray(e))return e=e.map(function(e){return pathToRegexp(e,r,n).source}),new RegExp("(?:"+e.join("|")+")",a);var o=new RegExp(["(\\\\.)","([\\/.])?(?:\\:(\\w+)(?:\\(((?:\\\\.|[^)])*)\\))?|\\(((?:\\\\.|[^)])*)\\))([+*?])?","([.+*?=^!:${}()[\\]|\\/])"].join("|"),"g");e=e.replace(o,function(e,n,t,i,a,u,o,c){if(n)return n;if(c)return"\\"+c;var l="+"===o||"*"===o,g="?"===o||"*"===o;return r.push({name:i||p++,delimiter:t||"/",optional:g,repeat:l}),t=t?"\\"+t:"",a=(a||u||"[^"+(t||"\\/")+"]+?").replace(/([=!:$\/()])/g,"\\$1"),l&&(a=a+"(?:"+t+a+")*"),g?"(?:"+t+"("+a+"))?":t+"("+a+")"});var c="/"===e[e.length-1];return t||(e=(c?e.slice(0,-2):e)+"(?:\\/(?=$))?"),i||(e+=t&&c?"":"(?=\\/|$)"),new RegExp("^"+e+(i?"$":""),a)}